(function(e){var t=function(t,n){var r={width:600,height:300,lapping:0,cardWith:500,duration:500,settings:"swing",triggerOnHover:false,onStart:null,onComplete:null},i=e.extend({},r,n),s={reset:function(){o.resetPositions()}},o={cards:[],cardsCount:0,currentCard:0,spaceBetweenCards:0,spreading:0,initialPositions:[],addIndices:function(){o.cards.each(function(t){e(this).data("index",t)})},applyStyles:function(){t.addClass("stackAccordion").css({width:i.width,height:i.height});o.cards.each(function(){e(this).css({position:"absolute"})})},setInitialPositions:function(){o.cards.each(function(t){var n=e(this);var r=t*o.spaceBetweenCards;if(!t==0){r-=i.lapping}o.initialPositions[t]=r;n.css({left:r,width:i.cardWith,height:"100%"})})},bindEvents:function(){o.cards.each(function(t){var n=e(this);if(i.triggerOnHover){n.children(".trigger").on("mouseover.stackAccordion",{index:t},o.triggerCard)}else{n.children(".trigger").on("click.stackAccordion",{index:t},o.triggerCard)}})},triggerCard:function(e){o.currentCard=e.data.index;o.animateCards()},animateCards:function(){o.cards.each(function(t){var n=e(this);var r=0;if(t>0){if(t<=o.currentCard){r=o.spreading*t;o.moveCard(n,t,r)}else{r=o.spreading*t+(i.cardWith-i.lapping-o.spreading);o.moveCard(n,t,r)}}})},moveCard:function(e,t,n){o.onAnimationStart(t);e.stop().animate({left:n},{duration:i.duration,easing:i.easing,complete:o.onAnimationComplete})},onAnimationStart:function(e){if(e==o.cardsCount-1){if(typeof i.onStart==="function"){i.onStart()}}},onAnimationComplete:function(){if(e(this).data("index")==o.cardsCount-1){if(typeof i.onComplete==="function"){i.onComplete(o.currentCard)}}},resetPositions:function(){o.cards.each(function(t){o.moveCard(e(this),t,o.initialPositions[t])})},init:function(){o.cards=t.children("li");o.cardsCount=o.cards.length;o.spaceBetweenCards=Math.floor(i.width/o.cardsCount);o.spreading=(i.width-i.cardWith)/(o.cardsCount-1);o.addIndices();o.applyStyles();o.setInitialPositions();o.bindEvents()}};o.init();return s};e.fn.stackAccordion=function(e){var n=this;var r=n.data("stackAccordion");if(typeof e==="object"||!e){return n.each(function(){var i;if(!r){i=new t(n,e);n.data("stackAccordion",i)}})}else if(typeof e==="string"&&r[e]){r[e].call(n);return n}}})(jQuery)